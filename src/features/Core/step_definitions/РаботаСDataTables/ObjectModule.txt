Перем юТест;

Функция ДобавитьШагВМассивТестов(МассивТестов,Снипет,ИмяПроцедуры,ПредставлениеТеста = Неопределено,Транзакция = Неопределено,Параметр = Неопределено)
	Структура = Новый Структура;
	Структура.Вставить("Снипет",Снипет);
	Структура.Вставить("ИмяПроцедуры",ИмяПроцедуры);
	Структура.Вставить("ИмяПроцедуры",ИмяПроцедуры);
	Структура.Вставить("ПредставлениеТеста",ПредставлениеТеста);
	Структура.Вставить("Транзакция",Транзакция);
	Структура.Вставить("Параметр",Параметр);
	МассивТестов.Добавить(Структура);
КонецФункции

Функция ПолучитьСписокТестов(КонтекстФреймворкаBDD) Экспорт
	юТест = КонтекстФреймворкаBDD;
	
	ВсеТесты = Новый Массив;

	//описание параметров
	//ДобавитьШагВМассивТестов(ВсеТесты,Снипет,ИмяПроцедуры,ПредставлениеТеста,Транзакция,Параметр);

	ДобавитьШагВМассивТестов(ВсеТесты,"ЯВыполняюШагСОбычнымПараметромИВПараметрыКоторогоПереданаТаблица(Парам01,ТабПарам)","ЯВыполняюШагСОбычнымПараметромИВПараметрыКоторогоПереданаТаблица","я выполняю шаг с обычным параметром ""ОбычныйПараметр"" и в параметры которого передана таблица:");
	ДобавитьШагВМассивТестов(ВсеТесты,"ВПеременнойКонтекстБудeтЗначениеИзТаблицыТип(Парам01,Парам02)","ВПеременнойКонтекстБудeтЗначениеИзТаблицыТип","в переменной контекст будeт значение из таблицы 10 Тип ""ЧислоВТаблице""");
	ДобавитьШагВМассивТестов(ВсеТесты,"ВПеременнойКонтекстБудeтОбычноеЗначениеПереданногоПараметраТип(Парам01,Парам02)","ВПеременнойКонтекстБудeтОбычноеЗначениеПереданногоПараметраТип","в переменной контекст будeт Обычное значение переданного параметра ""ОбычныйПараметр"" Тип ""ОбычныйПараметрИзПроцедуры""");

	Возврат ВсеТесты;
КонецФункции

Процедура ПередНачаломСценария() Экспорт
	
КонецПроцедуры

Процедура ПередОкончаниемСценария() Экспорт
	
КонецПроцедуры


//я выполняю шаг с обычным параметром "ОбычныйПараметр" и в параметры которого передана таблица:
//@ЯВыполняюШагСОбычнымПараметромИВПараметрыКоторогоПереданаТаблица(Парам01,ТабПарам)
Процедура ЯВыполняюШагСОбычнымПараметромИВПараметрыКоторогоПереданаТаблица(ОбычныйПараметр,ТаблицаИзФичи) Экспорт
	Контекст.Вставить("ОбычныйПараметрИзПроцедуры",ОбычныйПараметр);
	Для каждого СтрТаблицаИзФичи Из ТаблицаИзФичи Цикл
		ЗначениеКолонка1 = СтрТаблицаИзФичи["Кол1"];
		ЗначениеКолонка2 = СтрТаблицаИзФичи["Кол2"];
		
		Контекст.Вставить(ЗначениеКолонка2,ЗначениеКолонка1);
		//Сообщить("" + ЗначениеКолонка1 + ": " + ЗначениеКолонка2);
	КонецЦикла;
КонецПроцедуры

//в переменной контекст будeт значение из таблицы 10 Тип "Число"
//@ВПеременнойКонтекстБудeтЗначениеИзТаблицыТип(Парам01,Парам02)
Процедура ВПеременнойКонтекстБудeтЗначениеИзТаблицыТип(Значение,Тип) Экспорт
	Зн = Контекст[Тип];
	юТест.ПроверитьРавенство(Значение,Зн,"Получили ожидаемый результат.");
КонецПроцедуры

//в переменной контекст будeт Обычное значение переданного параметра "ОбычныйПараметр" Тип "ОбычныйПараметрИзПроцедуры"
//@ВПеременнойКонтекстБудeтОбычноеЗначениеПереданногоПараметраТип(Парам01,Парам02)
Процедура ВПеременнойКонтекстБудeтОбычноеЗначениеПереданногоПараметраТип(Значение,ИмяПараметра) Экспорт
	Зн = Контекст[ИмяПараметра];
	юТест.ПроверитьРавенство(Значение,Зн,"Получили ожидаемый результат.");
КонецПроцедуры
